string $wingMain = "L_wing";
string $wingExpName = "L_wing_flap";
string $wingMainCtl = ($wingMain + "_ctl");
string $wingMainGroup = ($wingMain + "_group");
vector $wingMainTargetLoc =`xform -q -ws -t $wingMain`;

string $wing1 = ($wingMain + "_1");
string $wing1Group = ($wing1 + "_group");
vector $wing1Loc =`xform -q -ws -t $wing1`;
string $wing1LocName = ($wingMain + "_1_loc");
string $wing1CtlName = ($wingMain + "_1_ctl");

string $wing2 = ($wingMain + "_2");
string $wing2Group = ($wing2 + "_group");
vector $wing2Loc =`xform -q -ws -t $wing2`;
string $wing2LocName = ($wingMain + "_2_loc");
string $wing2CtlName = ($wingMain + "_2_ctl");

string $wing3 = ($wingMain + "_3");
string $wing3Group = ($wing3 + "_group");
vector $wing3Loc =`xform -q -ws -t $wing3`;
string $wing3LocName = ($wingMain + "_3_loc");
string $wing3CtlName = ($wingMain + "_3_ctl");

string $wing4 = ($wingMain + "_4");
string $wing4Group = ($wing4 + "_group");
vector $wing4Loc =`xform -q -ws -t $wing4`;
string $wing4LocName = ($wingMain + "_4_loc");
string $wing4CtlName = ($wingMain + "_4_ctl");



string $flap1 = ($wingMain + "_flap_1");
string $flap1Group = ($flap1 + "_group");
vector $flap1Loc =`xform -q -ws -t $flap1`;
string $flap1LocName = ($wingMain + "_flap_1_loc");
string $flap1CtlName = ($wingMain + "_flap_1_ctl");


string $flap2 = ($wingMain + "_flap_2");
string $flap2Group = ($flap2 + "_group");
vector $flap2Loc =`xform -q -ws -t $flap2`;
string $flap2LocName = ($wingMain + "_flap_2_loc");
string $flap2CtlName = ($wingMain + "_flap_2_ctl");


string $flap3 = ($wingMain + "_flap_3");
string $flap3Group = ($flap3 + "_group");
vector $flap3Loc =`xform -q -ws -t $flap3`;
string $flap3LocName = ($wingMain + "_flap_3_loc");
string $flap3CtlName = ($wingMain + "_flap_3_ctl");


























CreateLocator;

rename "locator1" $wing1LocName ;

setAttr ( $wing1LocName + ".translateX" ) ($wingMainTargetLoc.x);
setAttr ( $wing1LocName + ".translateY" ) ($wingMainTargetLoc.y);
setAttr ( $wing1LocName + ".translateZ" ) ($wingMainTargetLoc.z);

select -r $wing1LocName;

FreezeTransformations;

doGroup 0 1 1;
rename "group1" $wing1Group;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($wing1Group + ".scalePivot") ($wing1Group + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

select -cl;
select -r $wing1CtlName;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($wing1CtlName + ".scalePivot") ($wing1CtlName + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

FreezeTransformations;
select -cl  ;

select -r $wing1CtlName ;
select -tgl $wing1LocName ;
parent;
select -cl  ;
select -r $wing1CtlName ;
FreezeTransformations;
select -cl  ;











CreateLocator;

rename "locator1" $wing2LocName ;

setAttr ( $wing2LocName + ".translateX" ) ($wingMainTargetLoc.x);
setAttr ( $wing2LocName + ".translateY" ) ($wingMainTargetLoc.y);
setAttr ( $wing2LocName + ".translateZ" ) ($wingMainTargetLoc.z);

select -r $wing2LocName;

FreezeTransformations;

doGroup 0 1 1;
rename "group1" $wing2Group;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($wing2Group + ".scalePivot") ($wing2Group + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

select -cl;
select -r $wing2CtlName;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($wing2CtlName + ".scalePivot") ($wing2CtlName + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

FreezeTransformations;
select -cl  ;

select -r $wing2CtlName ;
select -tgl $wing2LocName ;
parent;
select -cl  ;
select -r $wing2CtlName ;
FreezeTransformations;
select -cl  ;










CreateLocator;

rename "locator1" $wing3LocName ;

setAttr ( $wing3LocName + ".translateX" ) ($wingMainTargetLoc.x);
setAttr ( $wing3LocName + ".translateY" ) ($wingMainTargetLoc.y);
setAttr ( $wing3LocName + ".translateZ" ) ($wingMainTargetLoc.z);

select -r $wing3LocName;

FreezeTransformations;

doGroup 0 1 1;
rename "group1" $wing3Group;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($wing3Group + ".scalePivot") ($wing3Group + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

select -cl;
select -r $wing3CtlName;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($wing3CtlName + ".scalePivot") ($wing3CtlName + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

FreezeTransformations;
select -cl  ;

select -r $wing3CtlName ;
select -tgl $wing3LocName ;
parent;
select -cl  ;
select -r $wing3CtlName ;
FreezeTransformations;
select -cl  ;







CreateLocator;

rename "locator1" $wing4LocName ;

setAttr ( $wing4LocName + ".translateX" ) ($wingMainTargetLoc.x);
setAttr ( $wing4LocName + ".translateY" ) ($wingMainTargetLoc.y);
setAttr ( $wing4LocName + ".translateZ" ) ($wingMainTargetLoc.z);

select -r $wing4LocName;

FreezeTransformations;

doGroup 0 1 1;
rename "group1" $wing4Group;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($wing4Group + ".scalePivot") ($wing4Group + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

select -cl;
select -r $wing4CtlName;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($wing4CtlName + ".scalePivot") ($wing4CtlName + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

FreezeTransformations;
select -cl  ;

select -r $wing4CtlName ;
select -tgl $wing4LocName ;
parent;
select -cl  ;
select -r $wing4CtlName ;
FreezeTransformations;
select -cl  ;















CreateLocator;

rename "locator1" $flap1LocName ;

setAttr ( $flap1LocName + ".translateX" ) ($wingMainTargetLoc.x);
setAttr ( $flap1LocName + ".translateY" ) ($wingMainTargetLoc.y);
setAttr ( $flap1LocName + ".translateZ" ) ($wingMainTargetLoc.z);

select -r $flap1LocName;

FreezeTransformations;

doGroup 0 1 1;
rename "group1" $flap1Group;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($flap1Group + ".scalePivot") ($flap1Group + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

select -cl;
select -r $flap1CtlName;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($flap1CtlName + ".scalePivot") ($flap1CtlName + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

FreezeTransformations;
select -cl  ;

select -r $flap1CtlName ;
select -tgl $flap1LocName ;
parent;
select -cl  ;
select -r $flap1CtlName ;
FreezeTransformations;
select -cl  ;






CreateLocator;

rename "locator1" $flap2LocName ;

setAttr ( $flap2LocName + ".translateX" ) ($wingMainTargetLoc.x);
setAttr ( $flap2LocName + ".translateY" ) ($wingMainTargetLoc.y);
setAttr ( $flap2LocName + ".translateZ" ) ($wingMainTargetLoc.z);

select -r $flap2LocName;

FreezeTransformations;

doGroup 0 1 1;
rename "group1" $flap2Group;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($flap2Group + ".scalePivot") ($flap2Group + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

select -cl;
select -r $flap2CtlName;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($flap2CtlName + ".scalePivot") ($flap2CtlName + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

FreezeTransformations;
select -cl  ;

select -r $flap2CtlName ;
select -tgl $flap2LocName ;
parent;
select -cl  ;
select -r $flap2CtlName ;
FreezeTransformations;
select -cl  ;






CreateLocator;

rename "locator1" $flap3LocName ;

setAttr ( $flap3LocName + ".translateX" ) ($wingMainTargetLoc.x);
setAttr ( $flap3LocName + ".translateY" ) ($wingMainTargetLoc.y);
setAttr ( $flap3LocName + ".translateZ" ) ($wingMainTargetLoc.z);

select -r $flap3LocName;

FreezeTransformations;

doGroup 0 1 1;
rename "group1" $flap3Group;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($flap3Group + ".scalePivot") ($flap3Group + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

select -cl;
select -r $flap3CtlName;

SnapToPoint; dR_enterForSnap;
move -rpr ($wingMainTargetLoc.x) ($wingMainTargetLoc.y) ($wingMainTargetLoc.z) ($flap3CtlName + ".scalePivot") ($flap3CtlName + ".rotatePivot") ;
SnapToPoint; dR_enterForSnap;

FreezeTransformations;
select -cl  ;

select -r $flap3CtlName ;
select -tgl $flap3LocName ;
parent;
select -cl  ;
select -r $flap3CtlName ;
FreezeTransformations;
select -cl  ;





select -r $wing1CtlName ;
select -tgl $wing1 ;
doCreateParentConstraintArgList 1 { "1","0","0","0","0","0","0","1","","1" };
parentConstraint -mo -weight 1;

select -r $wing2CtlName ;
select -tgl $wing2 ;
doCreateParentConstraintArgList 1 { "1","0","0","0","0","0","0","1","","1" };
parentConstraint -mo -weight 1;;

select -r $wing3CtlName ;
select -tgl $wing3 ;
doCreateParentConstraintArgList 1 { "1","0","0","0","0","0","0","1","","1" };
parentConstraint -mo -weight 1;


select -r $wing4CtlName ;
select -tgl $wing4 ;
doCreateParentConstraintArgList 1 { "1","0","0","0","0","0","0","1","","1" };
parentConstraint -mo -weight 1;


select -r $flap1CtlName ;
select -tgl $flap1 ;
doCreateParentConstraintArgList 1 { "1","0","0","0","0","0","0","1","","1" };
parentConstraint -mo -weight 1;


select -r $flap2CtlName ;
select -tgl $flap2 ;
doCreateParentConstraintArgList 1 { "1","0","0","0","0","0","0","1","","1" };
parentConstraint -mo -weight 1;


select -r $flap3CtlName ;
select -tgl $flap3 ;
doCreateParentConstraintArgList 1 { "1","0","0","0","0","0","0","1","","1" };
parentConstraint -mo -weight 1;



select -r $wing1Group ;
select -tgl $wing2Group ;
select -tgl $wing3Group ;
select -tgl $wing4Group ;
select -tgl $flap1Group ;
select -tgl $flap2Group ;
select -tgl $flap3Group ;
select -tgl $wingMainGroup ;
parent;





string $modularWingExpString1 = ($wing1LocName + ".rotateY = (" + $wingMainCtl + ".rotateY * -.33);\n");
string $modularWingExpString2 = ($wing2LocName + ".rotateY = (" + $wingMainCtl + ".rotateY * -.66);\n");
string $modularWingExpString3 = ($wing3LocName + ".rotateY = (" + $wingMainCtl + ".rotateY * -1);\n");
string $modularWingExpString4 = ($wing4LocName + ".rotateY = (" + $wingMainCtl + ".rotateY * -1);\n");

string $modularWingExpString5 = ($flap1LocName + ".rotateY = (" + $wing1LocName + ".rotateY) /2; \n");
string $modularWingExpString6 = ($flap2LocName + ".rotateY = (" + $wing1LocName + ".rotateY + " + $wing2LocName + ".rotateY) /2; \n");
string $modularWingExpString7 = ($flap3LocName + ".rotateY = (" + $wing2LocName + ".rotateY + " + $wing3LocName + ".rotateY) /2; \n");

string $modularWingExpString8 = ($wing1LocName + ".rotateX = (" + $wingMainCtl + ".rotateX * -1);\n");
string $modularWingExpString9 = ($wing2LocName + ".rotateX = (" + $wingMainCtl + ".rotateX * -1);\n");
string $modularWingExpString10 = ($wing3LocName + ".rotateX = (" + $wingMainCtl + ".rotateX * -1);\n");
string $modularWingExpString11 = ($wing4LocName + ".rotateX = (" + $wingMainCtl + ".rotateX * -1);\n");
string $modularWingExpString12 = ($flap1LocName + ".rotateX = (" + $wingMainCtl + ".rotateX * -1);\n");
string $modularWingExpString13 = ($flap2LocName + ".rotateX = (" + $wingMainCtl + ".rotateX * -1);\n");
string $modularWingExpString14 = ($flap3LocName + ".rotateX = (" + $wingMainCtl + ".rotateX * -1);\n");

string $modularWingTieIn = ("\"" + $modularWingExpString1 + $modularWingExpString2 + $modularWingExpString3 + $modularWingExpString4 + $modularWingExpString5 + $modularWingExpString6 + $modularWingExpString7 + $modularWingExpString8 + $modularWingExpString9 + $modularWingExpString10 + $modularWingExpString11 + $modularWingExpString12 + $modularWingExpString13 + $modularWingExpString14 + "\"");

//print ($modularWingTieIn);

expression -s $modularWingTieIn  -o "" -n $wingExpName -ae 1 -uc all ;
